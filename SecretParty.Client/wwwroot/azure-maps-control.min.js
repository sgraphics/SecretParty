/* MIT License - Copyright (c) Arnaud Leclerc. */


!function(e,l,c,o,i,a,r,s,u,p){"use strict";function d(){}function f(e,t){return t={type:e.type,markerId:t},(e=null===(e=null==e?void 0:e.target)||void 0===e?void 0:e.options)&&(t.options={anchor:e.anchor,color:e.color,draggable:e.draggable,htmlContent:e.htmlContent,pixelOffset:e.pixelOffset,position:e.position,secondaryColor:e.secondaryColor,text:e.text,visible:e.visible}),t}var g=["boxzoomend","boxzoomstart","drag","dragend","dragstart","idle","load","move","moveend","movestart","pitch","pitchend","pitchstart","render","resize","rotate","rotateend","tokenacquired","wheel","zoom","zoomend","zoomstart"],y=["click","contextmenu","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup"],h=["data","sourcedata","styledata"],m=["layeradded","layerremoved"],v=["sourceadded","sourceremoved"],b=["styleimagemissing"],M=["touchcancel","touchend","touchstart"],_=(I.addControls=function(e){var n=this;e.forEach(function(e){var t;switch(e.type){case"compass":t=new l.control.CompassControl(e.options);break;case"pitch":t=new l.control.PitchControl(e.options);break;case"style":t=new l.control.StyleControl(e.options);break;case"zoom":t=new l.control.ZoomControl(e.options);break;case"scalebar":t=new o.control.ScaleBarControl(e.options);break;case"overviewmap":t=new i.control.OverviewMap(e.options);break;case"geolocation":t=new a.control.GeolocationControl(e.options);break;case"fullscreen":t=new r.control.FullscreenControl(e.options)}t.amc={id:e.id},n._map.controls.add(t,{position:e.position})})},I.addHtmlMarkers=function(e,n){var o=this;e.forEach(function(e){var t=o.getHtmlMarkerFromDefinition(e);e.events&&e.events.forEach(function(e){o._map.events.add(e,t,function(e){n.invokeMethodAsync("NotifyEventAsync",f(e,t.amc.id))})}),o._map.markers.add(t)})},I.getHtmlMarkerFromDefinition=function(e){var t={anchor:e.options.anchor,color:e.options.color,draggable:e.options.draggable,htmlContent:e.options.htmlContent,pixelOffset:e.options.pixelOffset,position:e.options.position,secondaryColor:e.options.secondaryColor,text:e.options.text,visible:e.options.visible};e.popupOptions&&(t.popup=new l.Popup(e.popupOptions.options));t=new l.HtmlMarker(t);return t.amc={id:e.id},t},I.attachEventsToHtmlMarker=function(t,e,n){var o=this;e.forEach(function(e){o._map.events.add(e,t,function(e){n.invokeMethodAsync("NotifyEventAsync",f(e,t.amc.id))})})},I.addLayer=function(e,t,n,o,i,a){var r,s=this;switch(n){case"tileLayer":r=new l.layer.TileLayer(o,e);break;case"imageLayer":r=new l.layer.ImageLayer(o,e);break;case"bubbleLayer":r=new l.layer.BubbleLayer(this._map.sources.getById(o.source),e,o);break;case"heatmapLayer":r=new l.layer.HeatMapLayer(this._map.sources.getById(o.source),e,o);break;case"lineLayer":r=new l.layer.LineLayer(this._map.sources.getById(o.source),e,o);break;case"polygonExtrusionLayer":r=new l.layer.PolygonExtrusionLayer(this._map.sources.getById(o.source),e,o);break;case"polygonLayer":r=new l.layer.PolygonLayer(this._map.sources.getById(o.source),e,o);break;case"symbolLayer":r=new l.layer.SymbolLayer(this._map.sources.getById(o.source),e,o)}r&&(i.forEach(function(n){s._map.events.add(n,r,function(e){var t;a.invokeMethodAsync("NotifyEventAsync",{type:n,layerId:r.getId(),pixel:e.pixel,pixels:e.pixels,position:e.position,positions:e.positions,shapes:null===(t=e.shapes)||void 0===t?void 0:t.filter(function(e){return e instanceof l.Shape}).map(function(e){return s.getSerializableShape(e)}),features:null===(e=e.shapes)||void 0===e?void 0:e.filter(function(e){return e instanceof l.data.Feature||"Feature"===e.type}).map(function(e){return s.getSerializableFeature(e)})})})}),this._map.layers.add(r,t))},I.addMap=function(e,t,n,o,i){var a=this;"aad"===t.authType?l.setAuthenticationOptions({authType:t.authType,aadAppId:t.aadAppId,aadTenant:t.aadTenant,clientId:t.clientId}):"subscriptionKey"===t.authType?l.setAuthenticationOptions({authType:t.authType,subscriptionKey:t.subscriptionKey,clientId:t.clientId}):l.setAuthenticationOptions({authType:t.authType,getToken:d.getTokenCallback,clientId:t.clientId});var r=new l.Map(e,n);o.includes("error")&&r.events.add("error",function(e){i.invokeMethodAsync("NotifyEventAsync",{type:e.type,error:e.error.stack})}),r.events.addOnce("ready",function(e){a._map=r,i.invokeMethodAsync("NotifyEventAsync",{type:e.type}),g.filter(function(e){return o.includes(e)}).forEach(function(e){r.events.add(e,function(){i.invokeMethodAsync("NotifyEventAsync",{type:e})})}),y.filter(function(e){return o.includes(e)}).forEach(function(n){r.events.add(n,function(e){var t;i.invokeMethodAsync("NotifyEventAsync",{type:n,layerId:e.layerId,pixel:e.pixel,position:e.position,shapes:null===(t=e.shapes)||void 0===t?void 0:t.filter(function(e){return e instanceof l.Shape}).map(function(e){return a.getSerializableShape(e)}),features:null===(e=e.shapes)||void 0===e?void 0:e.filter(function(e){return e instanceof l.data.Feature}).map(function(e){return a.getSerializableFeature(e)})})})}),h.filter(function(e){return o.includes(e)}).forEach(function(t){r.events.add(t,function(e){e={dataType:e.dataType,isSourceLoaded:e.isSourceLoaded,source:e.source?{id:e.source.getId()}:null,sourceDataType:e.sourceDataType,tile:e.tile,type:t};"styledata"===t&&(e.style=r.getStyle().style),i.invokeMethodAsync("NotifyEventAsync",e)})}),m.filter(function(e){return o.includes(e)}).forEach(function(t){r.events.add(t,function(e){i.invokeMethodAsync("NotifyEventAsync",{type:t,id:e.getId()})})}),v.filter(function(e){return o.includes(e)}).forEach(function(t){r.events.add(t,function(e){i.invokeMethodAsync("NotifyEventAsync",{type:t,source:{id:e.getId()}})})}),b.filter(function(e){return o.includes(e)}).forEach(function(t){r.events.add(t,function(e){i.invokeMethodAsync("NotifyEventAsync",{type:t,message:e})})}),M.filter(function(e){return o.includes(e)}).forEach(function(t){r.events.add(t,function(e){i.invokeMethodAsync("NotifyEventAsync",{type:t,layerId:e.layerId,pixel:e.pixel,pixels:e.pixels,position:e.position,positions:e.positions,shapes:null===(e=e.shapes)||void 0===e?void 0:e.filter(function(e){return e instanceof l.Shape}).map(function(e){return a.getSerializableShape(e)})})})})})},I.addPopup=function(t,e,n,o){var i=this,a=new l.Popup(e);this._popups.set(t,a),this._map.popups.add(a),n.forEach(function(e){i._map.events.add(e,a,function(){o.invokeMethodAsync("NotifyEventAsync",{type:e,id:t})})}),null!=e&&e.openOnAdd&&a.open()},I.addPopupWithTemplate=function(e,t,n,o,i,a){t.content=l.PopupTemplate.applyTemplate(I.formatProperties(n),o),this.addPopup(e,t,i,a)},I.addSource=function(o,e,t,n,i){var a,r=this;"datasource"===t?(a=new l.source.DataSource(o,e),this._map.sources.add(a),null!=n&&n.forEach(function(n){r._map.events.add(n,a,function(e){var t={type:n,id:o};e instanceof l.source.DataSource||(t.shapes=e.map(function(e){return I.getSerializableShape(e)})),i.invokeMethodAsync("NotifyEventAsync",t)})})):"vectortilesource"===t?this._map.sources.add(new l.source.VectorTileSource(o,e)):"griddeddatasource"===t&&(e=new s.source.GriddedDataSource(o,e),this._map.sources.add(e))},I.clearHtmlMarkers=function(){this._map.markers.clear()},I.clearLayers=function(){this._map.layers.clear()},I.clearPopups=function(){this._map.popups.clear(),this._popups.clear()},I.clearSources=function(){this._map.sources.clear()},I.clearMap=function(){this._map.clear(),this._popups.clear()},I.getMap=function(){return this._map},I.getPopup=function(e){return this._popups.has(e)?this._popups.get(e):null},I.getPopups=function(){return this._popups},I.removeHtmlMarkers=function(t){this._map.markers.remove(this._map.markers.getMarkers().find(function(e){return-1<t.indexOf(e.amc.id)}))},I.removeLayers=function(e){this._map.layers.remove(e)},I.removeSource=function(e){this._map.sources.remove(e)},I.removePopup=function(e){this._popups.has(e)&&this._popups.delete(e)},I.setCameraOptions=function(e){var t={bearing:e.bearing,centerOffset:e.centerOffset,duration:e.duration,maxZoom:e.maxZoom,minZoom:e.minZoom,pitch:e.pitch,type:e.type};e.bounds?(t.bounds=e.bounds,t.maxBounds=e.maxBounds,t.offset=e.offset,t.padding=e.padding):(e.center&&(t.center=e.center),t.zoom=e.zoom),this._map.setCamera(t)},I.setOptions=function(e,t,n,o){this.setCameraOptions(e),this.setStyleOptions(t),this.setUserInteraction(n),this.setTraffic(o)},I.setStyleOptions=function(e){this._map.setStyle(e)},I.setTraffic=function(e){this._map.setTraffic(e)},I.setUserInteraction=function(e){this._map.setUserInteraction(e)},I.updateHtmlMarkers=function(e){var n=this;e.forEach(function(t){var e={};t.options.anchor&&(e.anchor=t.options.anchor),t.options.color&&(e.color=t.options.color),t.options.draggable&&(e.draggable=t.options.draggable),t.options.htmlContent&&(e.htmlContent=t.options.htmlContent),t.options.position&&(e.position=t.options.position),t.options.pixelOffset&&(e.pixelOffset=t.options.pixelOffset),t.options.secondaryColor&&(e.secondaryColor=t.options.secondaryColor),t.options.text&&(e.text=t.options.text),t.options.visible&&(e.visible=t.options.visible),t.popupOptions&&(e.popup=new l.Popup(t.popupOptions.options)),n._map.markers.getMarkers().find(function(e){return e.amc.id===t.id}).setOptions(e)})},I.createImageFromTemplate=function(e){this._map.imageSprite.createFromTemplate(e.id,e.templateName,e.color,e.secondaryColor,e.scale)},I.setCanvasStyleProperty=function(e,t){this._map.getCanvas().style.setProperty(e,t)},I.setCanvasStyleProperties=function(e){var t=this._map.getCanvas();e.forEach(function(e){t.style.setProperty(e.key,e.value)})},I.setCanvasContainerStyleProperty=function(e,t){this._map.getCanvasContainer().style.setProperty(e,t)},I.setCanvasContainerStyleProperties=function(e){var t=this._map.getCanvasContainer();e.forEach(function(e){t.style.setProperty(e.key,e.value)})},I.getCamera=function(){return this._map.getCamera()},I.getStyle=function(){var e=this._map.getStyle();return{autoResize:e.autoResize,language:e.language,light:e.light,preserveDrawingBuffer:e.preserveDrawingBuffer,renderWorldCopies:e.renderWorldCopies,showBuildingModels:e.showBuildingModels,showFeedbackLink:e.showFeedbackLink,showLogo:e.showLogo,showTileBoundaries:e.showTileBoundaries,style:e.style,view:e.view}},I.getTraffic=function(){var e=this._map.getTraffic();return{flow:e.flow,incidents:e.incidents}},I.getUserInteraction=function(){var e=this._map.getUserInteraction();return{boxZoomInteraction:e.boxZoomInteraction,dblClickZoomInteraction:e.dblClickZoomInteraction,dragPanInteraction:e.dragPanInteraction,dragRotateInteraction:e.dragRotateInteraction,interactive:e.interactive,keyboardInteraction:e.keyboardInteraction,scrollZoomInteraction:e.scrollZoomInteraction,touchInteraction:e.touchInteraction,wheelZoomRate:e.wheelZoomRate}},I.getSerializableShape=function(e){return{geometry:e.toJson().geometry,id:e.getId(),properties:e.getProperties()}},I.formatProperties=function(e){if(e)for(var t in e){var n;"string"==typeof e[t]&&e[t].startsWith("azureMapsControl.datetime:")&&(n=Date.parse(e[t].replace("azureMapsControl.datetime:","")),isNaN(n)||(e[t]=new Date(n)))}return e},I.getSerializableFeature=function(e){return{bbox:e.bbox,geometry:e.geometry,id:e.id,properties:e.properties}},I._popups=new Map,I);function I(){}var w=(t.buildFeature=function(e){var t=this.buildGeometry(e.geometry);return new l.data.Feature(t,_.formatProperties(e.properties),e.id,e.bbox?new l.data.BoundingBox(e.bbox):null)},t.buildShape=function(e){return new l.Shape(this.buildGeometry(e.geometry),e.id,_.formatProperties(e.properties))},t.buildGeometry=function(e){switch(e.type){case"Point":return this.buildPoint(e);case"LineString":return this.buildLineString(e);case"Polygon":return this.buildPolygon(e);case"MultiPoint":return this.buildMultiPoint(e);case"MultiLineString":return this.buildMultiLineString(e);case"MultiPolygon":return this.buildMultiPolygon(e);default:return null}},t.buildPoint=function(e){return new l.data.Point(e.coordinates)},t.buildLineString=function(e){return new l.data.LineString(e.coordinates,e.bbox?new l.data.BoundingBox(e.bbox):null)},t.buildPolygon=function(e){return new l.data.Polygon(e.coordinates,e.bbox?new l.data.BoundingBox(e.bbox):null)},t.buildMultiPoint=function(e){return new l.data.MultiPoint(e.coordinates,e.bbox?new l.data.BoundingBox(e.bbox):null)},t.buildMultiLineString=function(e){return new l.data.MultiLineString(e.coordinates,e.bbox?new l.data.BoundingBox(e.bbox):null)},t.buildMultiPolygon=function(e){return new l.data.MultiPolygon(e.coordinates,e.bbox?new l.data.BoundingBox(e.bbox):null)},t);function t(){}var n=(C.drop=function(e,t,n,o,i){n=_.getMap().sources.getById(n),o=c.animations.drop(t,n,o,i);i.disposeOnComplete||this._animations.set(e,o)},C.dropMarkers=function(e,t,n,o,i){var a=_.getMap(),r=[];t.forEach(function(e){var t=_.getHtmlMarkerFromDefinition(e);r.push(t),e.events&&_.attachEventsToHtmlMarker(t,e.events,i)});n=c.animations.dropMarkers(r,a,n,o);o.disposeOnComplete||this._animations.set(e,n)},C.setCoordinates=function(e,t,n,o,i){var a=_.getMap(),a=n?a.sources.getById(n).getShapeById(t):a.markers.getMarkers().find(function(e){return e.amc&&e.amc.id===t}),o=c.animations.setCoordinates(a,o,i);i.disposeOnComplete||this._animations.set(e,o)},C.snakeline=function(e,t,n,o){t=_.getMap().sources.getById(n).getShapeById(t),t=c.animations.snakeline(t,o);o.disposeOnComplete||this._animations.set(e,t)},C.moveAlongPath=function(e,t,n,o,i,a){var r=_.getMap(),s=null;s="string"==typeof t?r.sources.getById(n).getShapeById(t):t;t=null;t=i?r.sources.getById(i).getShapeById(o):r.markers.getMarkers().find(function(e){return e.amc.id===o});t=c.animations.moveAlongPath(s,t,a);a.disposeOnComplete||this._animations.set(e,t)},C.moveAlongRoute=function(e,t,n,o,i){var a=_.getMap(),r=null;r=n?a.sources.getById(n).getShapeById(o):a.markers.getMarkers().find(function(e){return e.amc.id===o});t=t.map(function(e){var t=w.buildPoint(e);return new l.data.Feature(t,{_timestamp:new Date(e.timestamp).getTime()})});this._animations.set(e,c.animations.moveAlongRoute(t,r,i))},C.flowingDashedLine=function(e,t,n){t=_.getMap().layers.getLayerById(t);this._animations.set(e,c.animations.flowingDashedLine(t,n))},C.morph=function(e,t,n,o,i){t=_.getMap().sources.getById(n).getShapeById(t),o=c.animations.morph(t,w.buildGeometry(o),i);i.disposeOnComplete||this._animations.set(e,o)},C.groupAnimations=function(e,t,n){var o=this,i=[];t.forEach(function(e){!o._animations.has(e)||null!==(e=o._animations.get(e))&&i.push(e)}),this._animations.set(e,new c.animations.GroupAnimation(i,n))},C.dispose=function(e){this._animations.has(e)&&(this._animations.get(e).dispose(),this._animations.delete(e))},C.pause=function(e){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.pause()},C.play=function(e){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.play()},C.reset=function(e){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.reset()},C.seek=function(e,t){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.seek(t)},C.stop=function(e){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.stop()},C.setOptions=function(e,t){!this._animations.has(e)||null!==(e=this._animations.get(e))&&e.setOptions(t)},C._animations=new Map,C);function C(){}var S=(k.addDrawingToolbar=function(e,n){var o=this;this._toolbar=new u.control.DrawingToolbar({buttons:e.buttons,containerId:e.containerId,numColumns:e.numColumns,position:e.position,style:e.style,visible:e.visible});var t={freehandInterval:e.freehandInterval,interactionType:e.interactionType,mode:e.mode,shapeDraggingEnabled:e.shapeDraggingEnabled,toolbar:this._toolbar};e.dragHandleStyle&&(t.dragHandleStyle=new l.HtmlMarker({anchor:e.dragHandleStyle.anchor,color:e.dragHandleStyle.color,draggable:e.dragHandleStyle.draggable,htmlContent:e.dragHandleStyle.htmlContent,pixelOffset:e.dragHandleStyle.pixelOffset,position:e.dragHandleStyle.position,secondaryColor:e.dragHandleStyle.secondaryColor,text:e.dragHandleStyle.text,visible:e.dragHandleStyle.visible})),e.secondaryDragHandleStyle&&(t.secondaryDragHandleStyle=new l.HtmlMarker({anchor:e.secondaryDragHandleStyle.anchor,color:e.secondaryDragHandleStyle.color,draggable:e.secondaryDragHandleStyle.draggable,htmlContent:e.secondaryDragHandleStyle.htmlContent,pixelOffset:e.secondaryDragHandleStyle.pixelOffset,position:e.secondaryDragHandleStyle.position,secondaryColor:e.secondaryDragHandleStyle.secondaryColor,text:e.secondaryDragHandleStyle.text,visible:e.secondaryDragHandleStyle.visible}));var i=_.getMap();this._drawingManager=new u.drawing.DrawingManager(i,t),e.events&&e.events.forEach(function(t){i.events.add(t,o._drawingManager,function(e){"drawingmodechanged"===t?n.invokeMethodAsync("NotifyEventAsync",{type:t,newMode:e}):"drawingstarted"===t?n.invokeMethodAsync("NotifyEventAsync",{type:t}):n.invokeMethodAsync("NotifyEventAsync",{type:t,data:e.data})})})},k.removeDrawingToolbar=function(){this._drawingManager.dispose(),_.getMap().controls.remove(this._toolbar),this._drawingManager=null,this._toolbar=null},k.updateDrawingToolbar=function(e){this._toolbar.setOptions({buttons:e.buttons,containerId:e.containerId,numColumns:e.numColumns,position:e.position,style:e.style,visible:e.visible})},k);function k(){}var P=(x.close=function(e){e=_.getPopup(e);e&&e.close()},x.open=function(e){e=_.getPopup(e);e&&e.open()},x.remove=function(e){var t=_.getPopup(e);t&&(t.remove(),_.removePopup(e))},x.setOptions=function(e,t){e=_.getPopup(e);e&&(t={draggable:t.draggable,closeButton:t.closeButton,content:t.content,fillColor:t.fillColor,pixelOffset:t.pixelOffset,position:t.position,showPointer:t.showPointer},e.setOptions(t))},x.applyTemplate=function(e,t,n,o){t.content=l.PopupTemplate.applyTemplate(n,o),this.setOptions(e,t)},x);function x(){}var O=(B.getShapes=function(e){e=_.getMap().sources.getById(e).getShapes();return null==e?void 0:e.map(function(e){return _.getSerializableShape(e)})},B);function B(){}var A=(E.getCellChildren=function(e,t){return _.getMap().sources.getById(e).getCellChildren(t).map(function(e){return _.getSerializableFeature(e)})},E.getGridCells=function(e){return _.getMap().sources.getById(e).getGridCells().features.map(function(e){return _.getSerializableFeature(e)})},E.getPoints=function(e){return _.getMap().sources.getById(e).getPoints().features.map(function(e){return _.getSerializableFeature(e)})},E.setFeatureCollectionPoints=function(e,t){_.getMap().sources.getById(e).setPoints(t)},E.setFeaturePoints=function(e,t){t=t.map(function(e){return w.buildFeature(e)});_.getMap().sources.getById(e).setPoints(t)},E.setPoints=function(e,t){t=t.map(function(e){return w.buildPoint(e)});_.getMap().sources.getById(e).setPoints(t)},E.setShapePoints=function(e,t){t=t.map(function(e){return w.buildShape(e)});_.getMap().sources.getById(e).setPoints(t)},E);function E(){}function F(e,r,s,l){return new(s=s||Promise)(function(n,t){function o(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,i)}a((l=l.apply(e,r||[])).next())})}function L(n,o){var i,a,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(r=2&t[0]?a.return:t[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,t[1])).done)return r;switch(a=0,(t=r?[2&t[0],r.value]:t)[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],a=0}finally{i=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var T=(D.addShapes=function(e,t){t=t.map(function(e){return w.buildShape(e)});_.getMap().sources.getById(e).add(t)},D.addFeatures=function(e,t){t=t.map(function(e){return w.buildFeature(e)});_.getMap().sources.getById(e).add(t)},D.addFeatureCollection=function(e,t){_.getMap().sources.getById(e).add(t)},D.clear=function(e){_.getMap().sources.getById(e).clear()},D.importDataFromUrl=function(t,n){return F(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,_.getMap().sources.getById(t).importDataFromUrl(n)];case 1:return[2,e.sent()]}})})},D.remove=function(e,t){_.getMap().sources.getById(e).remove(t)},D.dispose=function(e){_.getMap().sources.getById(e).dispose()},D.getOptions=function(e){return _.getMap().sources.getById(e).getOptions()},D.setOptions=function(e,t){_.getMap().sources.getById(e).setOptions(t)},D);function D(){}var H=(z.togglePopup=function(t,n,e,o){var i,a=_.getMap(),r=_.getPopups(),s=a.markers.getMarkers().find(function(e){return e.amc.id===t});s.togglePopup(),r.has(n)||(i=s.getOptions().popup,r.set(n,i),e.forEach(function(e){a.events.add(e,i,function(){o.invokeMethodAsync("NotifyEventAsync",{type:e,id:n})})}))},z);function z(){}var N=(G.getLastKnownPosition=function(e){e=this._getGeolocationControl(e).getLastKnownPosition();return{geometry:e.geometry,properties:_.formatProperties(e.properties)}},G.isGeolocationSupported=function(){return F(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,a.control.GeolocationControl.isSupported()];case 1:return[2,e.sent()]}})})},G.dispose=function(e){this._getGeolocationControl(e).dispose()},G.setOptions=function(e,t){this._getGeolocationControl(e).setOptions(t)},G.addEvents=function(e,t,n){var o=this._getGeolocationControl(e),i=_.getMap();t.forEach(function(t){i.events.add(t,o,function(e){n.invokeMethodAsync("NotifyEventAsync",{code:e.code,message:e.message,feature:{bbox:e.bbox,geometry:e.geometry,properties:_.formatProperties(e.properties)},type:t})})})},G._getGeolocationControl=function(t){return _.getMap().controls.getControls().find(function(e){return e.amc&&e.amc.id===t})},G);function G(){}var Z=(R.setOptions=function(t,e){_.getMap().controls.getControls().find(function(e){return e.amc&&e.amc.id===t}).setOptions(e)},R);function R(){}var U=(K.isFullscreenSupported=function(){return F(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(r.control.FullscreenControl.isSupported())];case 1:return[2,e.sent()]}})})},K.dispose=function(e){this._getFullscreenControl(e).dispose()},K.setOptions=function(e,t){this._getFullscreenControl(e).setOptions(t)},K.isFullscreen=function(t){return F(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(this._getFullscreenControl(t).isFullscreen())];case 1:return[2,e.sent()]}})})},K.addEvents=function(e,t,n){var o=this._getFullscreenControl(e),i=_.getMap();t.forEach(function(e){i.events.add(e,o,function(e){n.invokeMethodAsync("NotifyEventAsync",o.isFullscreen())})})},K._getFullscreenControl=function(t){return _.getMap().controls.getControls().find(function(e){return e.amc&&e.amc.id===t})},K);function K(){}var W=(j.createIndoorManager=function(e,t,n,o){var i;t.levelControl&&(i=new p.control.LevelControl(t.levelControl.options)),t.theme||(t.theme="auto"),t.geography||(t.geography="us");var a=_.getMap(),r=new p.indoor.IndoorManager(a,{levelControl:i,statesetId:t.statesetId,theme:t.theme,tilesetId:t.tilesetId,geography:t.geography});if(n)for(var s=0,l=n;s<l.length;s++)!function(t){a.events.add(t,r,function(e){o.invokeMethodAsync("NotifyEventAsync",{facilityId:e.facilityId,levelNumber:e.levelNumber,prevFacilityId:e.prevFacilityId,prevLevelNumber:e.prevLevelNumber,type:t})})}(l[s]);this._indoorManagers.set(e,r)},j.dispose=function(e){this._getIndoorManager(e).dispose(),this._indoorManagers.delete(e)},j.initialize=function(e){this._getIndoorManager(e).initialize()},j.getCurrentFacility=function(e){e=this._getIndoorManager(e).getCurrentFacility();return{facilityId:e[0],levelOrdinal:e[1]}},j.getOptions=function(e){e=this._getIndoorManager(e).getOptions();return{statesetId:e.statesetId,theme:e.theme,tilesetId:e.tilesetId,geography:e.geography}},j.getStyleDefinition=function(e){return this._getIndoorManager(e).getStyleDefinition()},j.setDynamicStyling=function(e,t){this._getIndoorManager(e).setDynamicStyling(t)},j.setFacility=function(e,t,n){this._getIndoorManager(e).setFacility(t,n)},j.setOptions=function(e,t){var n,e=this._getIndoorManager(e);t.levelControl&&(n=new p.control.LevelControl(t.levelControl.options)),t.theme||(t.theme="auto"),e.setOptions({levelControl:n,statesetId:t.statesetId,theme:t.theme,tilesetId:t.tilesetId})},j._getIndoorManager=function(e){return this._indoorManagers.has(e)?this._indoorManagers.get(e):null},j._indoorManagers=new Map,j);function j(){}var q=(J.setOptions=function(e,t){_.getMap().layers.getLayerById(e).setOptions(t)},J);function J(){}e.Animation=n,e.Core=_,e.Datasource=O,e.Drawing=S,e.Extensions=d,e.FullscreenControl=U,e.GeolocationControl=N,e.GriddedDatasource=A,e.HtmlMarker=H,e.Indoor=W,e.Layer=q,e.OverviewMapControl=Z,e.Popup=P,e.Source=T,Object.defineProperty(e,"__esModule",{value:!0})}(this.azureMapsControl=this.azureMapsControl||{},atlas,atlas,atlas,atlas,atlas,atlas,atlas,atlas,atlas);
